<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Prachi's Smile Quiz</title>
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
  <style>
    /* Color Palette */
    :root {
      --primary: #F8BBD0;  /* muted blush pink */
      --neutral: #FFF8E1;  /* soft cream */
      --contrast: #FFFFFF; /* crisp white */
      --accent: #D4AF37;   /* subtle gold */
      --secondary-text: #888888; /* soft gray */
    }
    /* Global Styles */
    body {
      margin: 0;
      padding: 0;
      background-color: var(--neutral);
      font-family: 'Lato', sans-serif;
      color: var(--secondary-text);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }
    /* Container styling */
    #game-container {
      width: 90%;
      max-width: 600px;
      background-color: var(--contrast);
      border: 1px solid var(--primary);
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      padding: 20px;
      box-sizing: border-box;
      text-align: center;
    }
    h1, h2, h3 {
      font-family: 'Playfair Display', serif;
      color: var(--primary);
      letter-spacing: 1px;
      margin-bottom: 15px;
    }
    p {
      font-size: 1em;
      line-height: 1.5;
    }
    /* Button styling */
    button {
      background-color: var(--primary);
      color: var(--contrast);
      border: none;
      border-radius: 8px;
      padding: 10px 20px;
      font-size: 1em;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      font-family: 'Playfair Display', serif;
    }
    button:hover {
      transform: scale(1.05);
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }
    /* Photo styling */
    .photo {
      width: 100%;
      max-width: 300px;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      margin-bottom: 20px;
      transition: transform 0.3s ease;
    }
    /* Items container */
    .items-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-top: 20px;
      justify-items: center;
    }
    .item {
      width: 100px;
      height: 100px;
      border: 2px solid var(--primary);
      border-radius: 8px;
      background-color: var(--neutral);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: grab;
      transition: transform 0.2s ease;
    }
    .item img {
      width: 80%;
      border-radius: 4px;
    }
    /* Drop zone styling */
    #drop-zone {
      width: 300px;
      height: 300px;
      margin: 20px auto;
      border: 3px dashed var(--primary);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: var(--neutral);
      position: relative;
    }
    /* Modal Popup for Wrong Answer */
    #popup-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 10000;
    }
    #popup-content {
      background-color: var(--contrast);
      border: 2px solid var(--primary);
      border-radius: 12px;
      padding: 20px;
      max-width: 400px;
      text-align: center;
    }
    #popup-content img {
      width: 100%;
      max-width: 300px;
      border-radius: 8px;
      margin-bottom: 15px;
    }
    /* Confetti canvas */
    #confetti-canvas {
      position: fixed;
      pointer-events: none;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 9999;
    }
    /* Responsive tweaks */
    @media (max-width: 600px) {
      #drop-zone {
        width: 90%;
        height: auto;
        padding: 10px;
      }
      .items-container {
        grid-template-columns: 1fr 1fr;
      }
    }
  </style>
</head>
<body>
  <canvas id="confetti-canvas"></canvas>
  <div id="game-container"></div>
  
  <!-- Popup Modal -->
  <div id="popup-modal">
    <div id="popup-content">
      <img src="https://via.placeholder.com/300x200?text=Annoyed+Prachi" alt="Annoyed Prachi">
      <h3>You did it wrong, bitch! Get her the right stuff, try again!</h3>
      <button id="popup-btn">Continue</button>
    </div>
  </div>
  
  <!-- Audio placeholders: Replace the src URLs with your own sound files -->
  <audio id="audio-correct" src="your-correct-sound.mp3"></audio>
  <audio id="audio-wrong" src="your-wrong-sound.mp3"></audio>
  <audio id="audio-final" src="your-final-sound.mp3"></audio>

  <script>
    // Quiz Data
    const quizData = [
      {
        type: 'intro',
        photo: 'https://via.placeholder.com/300x200?text=This+is+Prachi!',
        buttonText: 'Move Ahead',
        message: ''
      },
      {
        type: 'quiz',
        header: 'She is real sad right now',
        photo: 'https://via.placeholder.com/300x200?text=Sad+Prachi',
        enlargeOnDrop: true,
        items: [
          { id: 'item1', label: 'Water', img: 'https://via.placeholder.com/100?text=Water', correct: true },
          { id: 'item2', label: 'Waffles', img: 'https://via.placeholder.com/100?text=Waffles', correct: false }
        ]
      },
      {
        type: 'quiz',
        header: 'She is real sad right now',
        photo: 'https://via.placeholder.com/300x200?text=Sad+Prachi',
        enlargeOnDrop: true,
        items: [
          { id: 'item3', label: 'Beer', img: 'https://via.placeholder.com/100?text=Beer', correct: false },
          { id: 'item4', label: 'Waffles', img: 'https://via.placeholder.com/100?text=Waffles', correct: true }
        ]
      },
      {
        type: 'quiz',
        header: 'She is real sad right now',
        photo: 'https://via.placeholder.com/300x200?text=Sad+Prachi',
        enlargeOnDrop: true,
        items: [
          { id: 'item5', label: 'Coffee', img: 'https://via.placeholder.com/100?text=Coffee', correct: true },
          { id: 'item6', label: 'Water', img: 'https://via.placeholder.com/100?text=Water', correct: false }
        ]
      },
      {
        // Cocaine quiz: even though it's wrong, we still move forward.
        type: 'quiz',
        header: 'Maybe cocaine?',
        photo: 'https://via.placeholder.com/300x200?text=Prachi+??',
        enlargeOnDrop: false,
        items: [
          { id: 'item7', label: 'Cocaine', img: 'https://via.placeholder.com/100?text=Cocaine', correct: false }
        ]
      },
      {
        // Big smile quiz
        type: 'quiz',
        header: 'I donâ€™t think Prachi needs any of this materialism, the only thing she needs is a big smile!',
        photo: 'https://via.placeholder.com/300x200?text=Prachi+Neutral',
        enlargeOnDrop: true,
        items: [
          { id: 'item8', label: 'Smile', img: 'https://via.placeholder.com/100?text=Smile', correct: true }
        ]
      },
      {
        // Final: Slideshow with dogs and cats
        type: 'final',
        slideshowPhotos: [
          'https://via.placeholder.com/300x200?text=Dog+with+Rose',
          'https://via.placeholder.com/300x200?text=Cat+with+Rose',
          'https://via.placeholder.com/300x200?text=Dog+with+Rose+2',
          'https://via.placeholder.com/300x200?text=Cat+with+Rose+2'
        ],
        message: 'No materialism, just a big smile :)'
      }
    ];

    let currentStep = 0;
    const gameContainer = document.getElementById('game-container');
    const popupModal = document.getElementById('popup-modal');
    const popupBtn = document.getElementById('popup-btn');

    // Clear container content
    function clearContainer() {
      gameContainer.innerHTML = '';
    }

    // Confetti effect (basic)
    function showConfetti() {
      const canvas = document.getElementById('confetti-canvas');
      const ctx = canvas.getContext('2d');
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      const particles = [];
      for (let i = 0; i < 100; i++) {
        particles.push({
          x: Math.random() * canvas.width,
          y: Math.random() * canvas.height - canvas.height,
          r: Math.random() * 4 + 1,
          d: Math.random() * 100,
          color: 'rgba(' + Math.floor(Math.random()*255) + ',' + 
                 Math.floor(Math.random()*255) + ',' + 
                 Math.floor(Math.random()*255) + ',1)'
        });
      }
      let angle = 0;
      const confettiInterval = setInterval(() => {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        angle += 0.01;
        particles.forEach(p => {
          p.y += Math.cos(angle + p.d) + 1;
          p.x += Math.sin(angle) * 2;
          ctx.fillStyle = p.color;
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
          ctx.fill();
        });
      }, 20);
      setTimeout(() => {
        clearInterval(confettiInterval);
        ctx.clearRect(0, 0, canvas.width, canvas.height);
      }, 3000);
    }

    // Render current step
    function renderStep() {
      clearContainer();
      const step = quizData[currentStep];
      if (step.type === 'intro') {
        const img = document.createElement('img');
        img.src = step.photo;
        img.className = 'photo';
        gameContainer.appendChild(img);

        const p = document.createElement('p');
        p.textContent = step.message;
        gameContainer.appendChild(p);

        const btn = document.createElement('button');
        btn.textContent = step.buttonText;
        btn.addEventListener('click', () => {
          currentStep++;
          renderStep();
        });
        gameContainer.appendChild(btn);
      } else if (step.type === 'quiz') {
        const header = document.createElement('h2');
        header.textContent = step.header;
        gameContainer.appendChild(header);

        const dropZone = document.createElement('div');
        dropZone.id = 'drop-zone';
        dropZone.addEventListener('dragover', (e) => e.preventDefault());
        dropZone.addEventListener('drop', (e) => {
          e.preventDefault();
          const itemId = e.dataTransfer.getData('text/plain');
          handleDrop(itemId, dropZone, step);
        });
        const img = document.createElement('img');
        img.src = step.photo;
        img.className = 'photo';
        dropZone.appendChild(img);
        gameContainer.appendChild(dropZone);

        // Items container
        const itemsContainer = document.createElement('div');
        itemsContainer.className = 'items-container';
        step.items.forEach(item => {
          const itemDiv = document.createElement('div');
          itemDiv.className = 'item';
          itemDiv.draggable = true;
          itemDiv.id = item.id;
          itemDiv.dataset.correct = item.correct;
          itemDiv.addEventListener('dragstart', (e) => {
            e.dataTransfer.setData('text/plain', item.id);
          });
          const itemImg = document.createElement('img');
          itemImg.src = item.img;
          itemImg.alt = item.label;
          itemDiv.appendChild(itemImg);
          itemsContainer.appendChild(itemDiv);
        });
        gameContainer.appendChild(itemsContainer);
      } else if (step.type === 'final') {
        const msg = document.createElement('h2');
        msg.textContent = step.message;
        gameContainer.appendChild(msg);
        const slideshow = document.createElement('div');
        slideshow.id = 'slideshow';
        gameContainer.appendChild(slideshow);
        let idx = 0;
        function updateSlide() {
          slideshow.innerHTML = '';
          const img = document.createElement('img');
          img.src = step.slideshowPhotos[idx];
          img.className = 'photo';
          slideshow.appendChild(img);
          idx = (idx + 1) % step.slideshowPhotos.length;
        }
        updateSlide();
        setInterval(updateSlide, 2000);
        document.getElementById('audio-final').play();
        showConfetti();
      }
    }

    // Handle drop event
    function handleDrop(itemId, dropZone, step) {
      const itemEl = document.getElementById(itemId);
      const isCorrect = itemEl.dataset.correct === 'true';
      if (isCorrect) {
        document.getElementById('audio-correct').play();
        if (step.enlargeOnDrop) {
          const img = dropZone.querySelector('img');
          img.style.transform = 'scale(1.2)';
          setTimeout(() => img.style.transform = 'scale(1)', 300);
        }
        setTimeout(() => {
          currentStep++;
          renderStep();
        }, 600);
      } else {
        document.getElementById('audio-wrong').play();
        popupModal.style.display = 'flex';
      }
    }

    // Popup Continue Button
    popupBtn.addEventListener('click', () => {
      popupModal.style.display = 'none';
      // If current step is the cocaine quiz, move forward regardless of wrong answer.
      if (quizData[currentStep].header.toLowerCase().includes("cocaine")) {
        currentStep++;
      }
      renderStep();
    });

    renderStep();
  </script>
</body>
</html>
