<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Prachi's Smile Quiz</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background: #f4f4f4;
      margin: 0;
      padding: 0;
      overflow-x: hidden;
    }
    #game-container {
      width: 90%;
      max-width: 600px;
      margin: 50px auto;
      text-align: center;
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      position: relative;
    }
    .photo {
      width: 100%;
      max-width: 300px;
      transition: transform 0.3s ease;
      margin-bottom: 20px;
    }
    .items-container {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 20px;
    }
    .item {
      width: 100px;
      height: 100px;
      border: 2px solid #ccc;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: grab;
      background: #e9e9e9;
    }
    #drop-zone {
      width: 300px;
      height: 300px;
      margin: 20px auto;
      border: 3px dashed #aaa;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }
    #message {
      font-size: 1.2em;
      margin-top: 10px;
    }
    .hidden {
      display: none;
    }
    /* Confetti canvas (full screen) */
    #confetti-canvas {
      position: fixed;
      pointer-events: none;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 9999;
    }
    button {
      padding: 10px 20px;
      font-size: 1em;
      border: none;
      border-radius: 5px;
      background: #28a745;
      color: white;
      cursor: pointer;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <canvas id="confetti-canvas"></canvas>
  <div id="game-container">
    <!-- Screen content will be injected here -->
  </div>

  <!-- Audio placeholders -->
  <audio id="audio-correct" src="your-correct-sound.mp3"></audio>
  <audio id="audio-wrong" src="your-wrong-sound.mp3"></audio>
  <audio id="audio-final" src="your-final-sound.mp3"></audio>

  <script>
    // Data for each quiz step
    const quizData = [
      {
        // Step 1: Base Screen
        type: 'intro',
        photo: 'https://via.placeholder.com/300x200?text=This+is+Prachi!',
        buttonText: 'Move Ahead',
        message: ''
      },
      {
        // Quiz 1: Example question (sad state, two items)
        type: 'quiz',
        header: 'She is real sad right now',
        photo: 'https://via.placeholder.com/300x200?text=Sad+Prachi',
        enlargeOnDrop: true,
        items: [
          { id: 'item1', label: 'Water', img: 'https://via.placeholder.com/100?text=Water', correct: true },
          { id: 'item2', label: 'Waffles', img: 'https://via.placeholder.com/100?text=Waffles', correct: false }
        ]
      },
      {
        // Quiz 2
        type: 'quiz',
        header: 'She is real sad right now',
        photo: 'https://via.placeholder.com/300x200?text=Sad+Prachi',
        enlargeOnDrop: true,
        items: [
          { id: 'item3', label: 'Beer', img: 'https://via.placeholder.com/100?text=Beer', correct: false },
          { id: 'item4', label: 'Waffles', img: 'https://via.placeholder.com/100?text=Waffles', correct: true }
        ]
      },
      {
        // Quiz 3
        type: 'quiz',
        header: 'She is real sad right now',
        photo: 'https://via.placeholder.com/300x200?text=Sad+Prachi',
        enlargeOnDrop: true,
        items: [
          { id: 'item5', label: 'Coffee', img: 'https://via.placeholder.com/100?text=Coffee', correct: true },
          { id: 'item6', label: 'Water', img: 'https://via.placeholder.com/100?text=Water', correct: false }
        ]
      },
      {
        // Quiz 4: Special "cocaine" step
        type: 'quiz',
        header: 'Maybe cocaine?',
        photo: 'https://via.placeholder.com/300x200?text=Prachi+??',
        enlargeOnDrop: false,
        items: [
          { id: 'item7', label: 'Cocaine', img: 'https://via.placeholder.com/100?text=Cocaine', correct: false },
          { id: 'item8', label: 'Inhaler', img: 'https://via.placeholder.com/100?text=Inhaler', correct: true }
        ]
      },
      {
        // Smile step
        type: 'quiz',
        header: 'The only thing she needs is a big smile!',
        photo: 'https://via.placeholder.com/300x200?text=Prachi+Neutral',
        enlargeOnDrop: true,
        items: [
          { id: 'item9', label: 'Smile', img: 'https://via.placeholder.com/100?text=Smile', correct: true }
        ]
      },
      {
        // Final Screen: Dog & Cat slideshow with a cute message
        type: 'final',
        slideshowPhotos: [
          'https://via.placeholder.com/300x200?text=Dog+with+Rose',
          'https://via.placeholder.com/300x200?text=Cat+with+Rose',
          'https://via.placeholder.com/300x200?text=Dog+with+Rose+2',
          'https://via.placeholder.com/300x200?text=Cat+with+Rose+2'
        ],
        message: 'No materialism, just a big smile :)'
      }
    ];

    let currentStep = 0;

    const gameContainer = document.getElementById('game-container');

    // Helper to clear container
    function clearContainer() {
      gameContainer.innerHTML = '';
    }

    // Confetti function (simple version)
    function showConfetti() {
      // Basic confetti effect using canvas
      const canvas = document.getElementById('confetti-canvas');
      const ctx = canvas.getContext('2d');
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      const particles = [];
      for (let i = 0; i < 100; i++) {
        particles.push({
          x: Math.random() * canvas.width,
          y: Math.random() * canvas.height - canvas.height,
          r: Math.random() * 4 + 1,
          d: Math.random() * 100,
          color: 'rgba(' + Math.floor(Math.random()*255) + ',' + 
                 Math.floor(Math.random()*255) + ',' + 
                 Math.floor(Math.random()*255) + ',1)'
        });
      }
      let angle = 0;
      const confettiInterval = setInterval(() => {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        angle += 0.01;
        particles.forEach(p => {
          p.y += Math.cos(angle + p.d) + 1;
          p.x += Math.sin(angle) * 2;
          ctx.fillStyle = p.color;
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
          ctx.fill();
        });
        // Stop after a short while
      }, 20);
      setTimeout(() => {
        clearInterval(confettiInterval);
        ctx.clearRect(0, 0, canvas.width, canvas.height);
      }, 3000);
    }

    // Render current step
    function renderStep() {
      clearContainer();
      const step = quizData[currentStep];

      if (step.type === 'intro') {
        const img = document.createElement('img');
        img.src = step.photo;
        img.className = 'photo';
        gameContainer.appendChild(img);

        const p = document.createElement('p');
        p.textContent = step.message;
        gameContainer.appendChild(p);

        const btn = document.createElement('button');
        btn.textContent = step.buttonText;
        btn.addEventListener('click', () => {
          currentStep++;
          renderStep();
        });
        gameContainer.appendChild(btn);
      } else if (step.type === 'quiz') {
        const header = document.createElement('h2');
        header.textContent = step.header;
        gameContainer.appendChild(header);

        const dropZone = document.createElement('div');
        dropZone.id = 'drop-zone';
        // allow drop events
        dropZone.addEventListener('dragover', (e) => {
          e.preventDefault();
        });
        dropZone.addEventListener('drop', (e) => {
          e.preventDefault();
          const itemId = e.dataTransfer.getData('text/plain');
          handleDrop(itemId, dropZone, step);
        });

        const img = document.createElement('img');
        img.src = step.photo;
        img.className = 'photo';
        dropZone.appendChild(img);
        gameContainer.appendChild(dropZone);

        // Items container
        const itemsContainer = document.createElement('div');
        itemsContainer.className = 'items-container';
        step.items.forEach(item => {
          const itemDiv = document.createElement('div');
          itemDiv.className = 'item';
          itemDiv.draggable = true;
          itemDiv.id = item.id;
          itemDiv.dataset.correct = item.correct;
          // drag event
          itemDiv.addEventListener('dragstart', (e) => {
            e.dataTransfer.setData('text/plain', item.id);
          });
          // Image for item
          const itemImg = document.createElement('img');
          itemImg.src = item.img;
          itemImg.alt = item.label;
          itemImg.style.width = '80%';
          itemDiv.appendChild(itemImg);
          itemsContainer.appendChild(itemDiv);
        });
        gameContainer.appendChild(itemsContainer);
        
        // Message element for wrong feedback
        const msgEl = document.createElement('div');
        msgEl.id = 'message';
        gameContainer.appendChild(msgEl);
      } else if (step.type === 'final') {
        const msg = document.createElement('h2');
        msg.textContent = step.message;
        gameContainer.appendChild(msg);
        // Slideshow container
        const slideshow = document.createElement('div');
        slideshow.id = 'slideshow';
        gameContainer.appendChild(slideshow);
        let idx = 0;
        function updateSlide() {
          slideshow.innerHTML = '';
          const img = document.createElement('img');
          img.src = step.slideshowPhotos[idx];
          img.className = 'photo';
          slideshow.appendChild(img);
          idx = (idx + 1) % step.slideshowPhotos.length;
        }
        updateSlide();
        setInterval(updateSlide, 2000);

        // Final sound effect and confetti
        document.getElementById('audio-final').play();
        showConfetti();
      }
    }

    // Handle drop event
    function handleDrop(itemId, dropZone, step) {
      const itemEl = document.getElementById(itemId);
      const isCorrect = itemEl.dataset.correct === 'true';
      if (isCorrect) {
        // Play correct sound
        document.getElementById('audio-correct').play();
        // If enlargeOnDrop is set, scale up the photo briefly
        if (step.enlargeOnDrop) {
          const img = dropZone.querySelector('img');
          img.style.transform = 'scale(1.2)';
          setTimeout(() => {
            img.style.transform = 'scale(1)';
          }, 300);
        }
        // Move to next step after a short delay
        setTimeout(() => {
          currentStep++;
          renderStep();
        }, 600);
      } else {
        // Wrong answer, play wrong sound and show annoyed message/photo
        document.getElementById('audio-wrong').play();
        const img = dropZone.querySelector('img');
        img.src = 'https://via.placeholder.com/300x200?text=Wrong+Bitch!';
        // Display message
        const msgEl = document.getElementById('message');
        msgEl.textContent = 'You did it wrong, bitch! Get her the right stuff, try again!';
        // Shake effect
        dropZone.classList.add('shake');
        setTimeout(() => dropZone.classList.remove('shake'), 500);
      }
    }

    // Optional: add shake animation via CSS injection
    const styleSheet = document.createElement('style');
    styleSheet.textContent = `
      @keyframes shake {
        0% { transform: translate(1px, 1px) rotate(0deg); }
        10% { transform: translate(-1px, -2px) rotate(-1deg); }
        20% { transform: translate(-3px, 0px) rotate(1deg); }
        30% { transform: translate(3px, 2px) rotate(0deg); }
        40% { transform: translate(1px, -1px) rotate(1deg); }
        50% { transform: translate(-1px, 2px) rotate(-1deg); }
        60% { transform: translate(-3px, 1px) rotate(0deg); }
        70% { transform: translate(3px, 1px) rotate(-1deg); }
        80% { transform: translate(-1px, -1px) rotate(1deg); }
        90% { transform: translate(1px, 2px) rotate(0deg); }
        100% { transform: translate(1px, -2px) rotate(-1deg); }
      }
      .shake {
        animation: shake 0.5s;
      }
    `;
    document.head.appendChild(styleSheet);

    // Start the game
    renderStep();
  </script>
</body>
</html>
